/*!
 * @preserve
 * jquery.scrolldepth.js | v0.6
 * Copyright (c) 2014 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,n,t){"use strict";var r,o,a,l={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0},i=e(n),c=[],u=0;e.scrollDepth=function(g){function h(e,n,t,l){a?(dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:n,eventValue:1,eventNonInteraction:g.nonInteraction}),g.pixelDepth&&arguments.length>2&&t>u&&(u=t,dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:m(t),eventValue:1,eventNonInteraction:g.nonInteraction})),g.userTiming&&arguments.length>3&&dataLayer.push({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:n,eventTiming:l})):g.customHandler?(g.customHandler({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:n,eventValue:1,eventNonInteraction:g.nonInteraction}),g.pixelDepth&&arguments.length>2&&t>u&&(u=t,g.customHandler({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:m(t),eventValue:1,eventNonInteraction:g.nonInteraction})),g.userTiming&&arguments.length>3&&g.customHandler({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:n,eventTiming:l})):(r&&(ga("send","event","Scroll Depth",e,n,1,{nonInteraction:g.nonInteraction?1:0}),g.pixelDepth&&arguments.length>2&&t>u&&(u=t,ga("send","event","Scroll Depth","Pixel Depth",m(t),1,{nonInteraction:g.nonInteraction?1:0})),g.userTiming&&arguments.length>3&&ga("send","timing","Scroll Depth",e,l,n)),o&&(_gaq.push(["_trackEvent","Scroll Depth",e,n,1,g.nonInteraction]),g.pixelDepth&&arguments.length>2&&t>u&&(u=t,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",m(t),1,g.nonInteraction])),g.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,l,n,100])))}function s(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function p(n,t,r){e.each(n,function(n,o){-1===e.inArray(n,c)&&t>=o&&(h("Percentage",n,t,r),c.push(n))})}function v(n,t,r){e.each(n,function(n,o){-1===e.inArray(o,c)&&e(o).length&&t>=e(o).offset().top&&(h("Elements",o,t,r),c.push(o))})}function m(e){return(250*Math.floor(e/250)).toString()}function D(e,n){var t,r,o,a=null,l=0,i=function(){l=new Date,a=null,o=e.apply(t,r)};return function(){var c=new Date;l||(l=c);var u=n-(c-l);return t=this,r=arguments,0>=u?(clearTimeout(a),a=null,l=c,o=e.apply(t,r)):a||(a=setTimeout(i,u)),o}}var f=+new Date;g=e.extend({},l,g),e(t).height()<g.minHeight||("function"==typeof ga&&(r=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(o=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(a=!0),g.percentage?h("Percentage","Baseline"):g.elements&&h("Elements","Baseline"),i.on("scroll.scrollDepth",D(function(){var r=e(t).height(),o=n.innerHeight?n.innerHeight:i.height(),a=i.scrollTop()+o,l=s(r),u=+new Date-f;return c.length>=4+g.elements.length?void i.off("scroll.scrollDepth"):(g.elements&&v(g.elements,a,u),void(g.percentage&&p(l,a,u)))},500)))}}(jQuery,window,document);